<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cps/spec</title>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css?v=2.1.1">

<!-- JS -->
<script type="text/javascript" src="../dochack.js?v=2.1.1"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">cps/spec</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="../theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" oninput="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Callback" title="Callback[C; R; P] = object
  fn*: P                     ## 
                             ## the bootstrap for continuation C
  rs*: proc (c: var C): R {.nimcall.} ## 
                                      ## the result fetcher for continuation C">Callback</a></li>
<li><a class="reference" href="#Continuation" title="Continuation = ref object of ContinuationObj">Continuation</a></li>
<li><a class="reference" href="#ContinuationObj" title="ContinuationObj = object of RootObj
  fn*: proc (c: sink Continuation): Continuation {.nimcall.} ## 
                                                             ## The `fn` points to the next continuation leg.
  mom*: Continuation ## 
                     ## If this Continuation was invoked by another Continuation,
                     ## the `mom` will hold that parent Continuation to form a
                     ## linked-list approximating a stack.
  ex*: ref Exception         ## The unhandled exception of the continuation.
  when cpsTraceDeque:
    frames*: Deque[TraceFrame] ## Tracing for all prior hooks
  when cpsStackFrames:
    stack*: TraceFrame       ## Stack-like semantic record">ContinuationObj</a></li>
<li><a class="reference" href="#ContinuationProc" title="ContinuationProc[T] = proc (c: sink T): T {.nimcall.}">ContinuationProc</a></li>
<li><a class="reference" href="#Hook" title="Hook = enum
  Coop = &quot;coop&quot;,            ## returns control to the dispatcher
  Trace = &quot;trace&quot;,          ## executed at entry to each continuation leg
  Alloc = &quot;alloc&quot;,          ## performs allocation of a new continuation
  Dealloc = &quot;dealloc&quot;,      ## performs deallocation of a continuation
  Pass = &quot;pass&quot;,            ## transfers control-flow between continuations
  Boot = &quot;boot&quot;,            ## prepares a continuation for initial use
  Unwind = &quot;unwind&quot;,        ## controlled &quot;bubble-up&quot; for exception handling
  Head = &quot;head&quot;,            ## invoked when a new continuation has no parent
  Tail = &quot;tail&quot;,            ## invoked when a new continuation has a parent
  Stack = &quot;stack&quot;            ## invoked to annotate stack semantics">Hook</a></li>
<li><a class="reference" href="#State" title="State {.pure.} = enum
  Running,                  ## The continuation is active and running and can be resumed
  Dismissed,                ## The continuation is currently somewhere else
  Finished                   ## The continuation is finished and can no longer be resumed">State</a></li>
<li><a class="reference" href="#TraceFrame" title="TraceFrame = object
  hook*: Hook                ## the hook that provoked the trace entry
  fun*: string               ## a short label for the notable symbol
  info*: LineInfo            ## the source of the notable symbol">TraceFrame</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#10" id="60">Consts</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#cpsCallOperatorSupported" title="cpsCallOperatorSupported = true">cpsCallOperatorSupported</a></li>
<li><a class="reference" href="#cpsStackFrames" title="cpsStackFrames {.booldefine, used.} = true">cpsStackFrames</a></li>
<li><a class="reference" href="#cpsTraceDeque" title="cpsTraceDeque {.booldefine, used.} = true">cpsTraceDeque</a></li>
<li><a class="reference" href="#traceDequeSize" title="traceDequeSize {.intdefine, used.} = 4096">traceDequeSize</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">bootstrapSymbol
  <li><a class="reference" href="#bootstrapSymbol%2CNimNode" title="bootstrapSymbol(n: NimNode): NormNode">bootstrapSymbol(n: NimNode): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">breakLabel
  <li><a class="reference" href="#breakLabel%2CNormNode" title="breakLabel(n: NormNode): NormNode">breakLabel(n: NormNode): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">copyOrVoid
  <li><a class="reference" href="#copyOrVoid%2CNimNode" title="copyOrVoid(n: NimNode): NimNode">copyOrVoid(n: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">cpsCallbackTypeDef
  <li><a class="reference" href="#cpsCallbackTypeDef%2CNimNode%2CNimNode" title="cpsCallbackTypeDef(tipe: NimNode; n: NimNode): NimNode">cpsCallbackTypeDef(tipe: NimNode; n: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">createCallback
  <li><a class="reference" href="#createCallback%2CNimNode" title="createCallback(sym: NimNode): NimNode">createCallback(sym: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">emptyAsNil
  <li><a class="reference" href="#emptyAsNil%2CNimNode" title="emptyAsNil(n: NimNode): NimNode">emptyAsNil(n: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">enbasen
  <li><a class="reference" href="#enbasen%2CNimNode" title="enbasen(n: NimNode): TypeExpr">enbasen(n: NimNode): TypeExpr</a></li>

</ul>
<ul class="simple nested-toc-section">ensimilate
  <li><a class="reference" href="#ensimilate%2CNormNode%2CNormNode" title="ensimilate(source, destination: NormNode): Call">ensimilate(source, destination: NormNode): Call</a></li>

</ul>
<ul class="simple nested-toc-section">filterPragma
  <li><a class="reference" href="#filterPragma%2Cseq%5BPragmaAtom%5D%2CName" title="filterPragma(ns: seq[PragmaAtom]; liftee: Name): NormNode">filterPragma(ns: seq[PragmaAtom]; liftee: Name): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">getContSym
  <li><a class="reference" href="#getContSym%2CNormNode" title="getContSym(n: NormNode): Name">getContSym(n: NormNode): Name</a></li>

</ul>
<ul class="simple nested-toc-section">hash
  <li><a class="reference" href="#hash%2CNimNode" title="hash(n: NimNode): Hash">hash(n: NimNode): Hash</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsBlock
  <li><a class="reference" href="#isCpsBlock%2CNormNode" title="isCpsBlock(n: NormNode): bool">isCpsBlock(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsBreak
  <li><a class="reference" href="#isCpsBreak%2CNormNode" title="isCpsBreak(n: NormNode): bool">isCpsBreak(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsCall
  <li><a class="reference" href="#isCpsCall%2CNormNode" title="isCpsCall(n: NormNode): bool">isCpsCall(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsCont
  <li><a class="reference" href="#isCpsCont%2CNormNode" title="isCpsCont(n: NormNode): bool">isCpsCont(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsContinue
  <li><a class="reference" href="#isCpsContinue%2CNormNode" title="isCpsContinue(n: NormNode): bool">isCpsContinue(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsConvCall
  <li><a class="reference" href="#isCpsConvCall%2CNormNode" title="isCpsConvCall(n: NormNode): bool">isCpsConvCall(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsPending
  <li><a class="reference" href="#isCpsPending%2CNormNode" title="isCpsPending(n: NormNode): bool">isCpsPending(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isCpsTerminate
  <li><a class="reference" href="#isCpsTerminate%2CNormNode" title="isCpsTerminate(n: NormNode): bool">isCpsTerminate(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isScopeExit
  <li><a class="reference" href="#isScopeExit%2CNormNode" title="isScopeExit(n: NormNode): bool">isScopeExit(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">isVoodooCall
  <li><a class="reference" href="#isVoodooCall%2CNormNode" title="isVoodooCall(n: NormNode): bool">isVoodooCall(n: NormNode): bool</a></li>

</ul>
<ul class="simple nested-toc-section">makeErrorShim
  <li><a class="reference" href="#makeErrorShim%2CNimNode" title="makeErrorShim(n: NimNode): NimNode">makeErrorShim(n: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">matchCpsBreak
  <li><a class="reference" href="#matchCpsBreak" title="matchCpsBreak(): NormMatcher">matchCpsBreak(): NormMatcher</a></li>
<li><a class="reference" href="#matchCpsBreak%2CNormNode" title="matchCpsBreak(label: NormNode): NormMatcher">matchCpsBreak(label: NormNode): NormMatcher</a></li>

</ul>
<ul class="simple nested-toc-section">newCpsBreak
  <li><a class="reference" href="#newCpsBreak%2CNormNode" title="newCpsBreak(n: NormNode; label = newNilLit().NormNode): NormNode">newCpsBreak(n: NormNode; label = newNilLit().NormNode): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">newCpsContinue
  <li><a class="reference" href="#newCpsContinue%2CNormNode" title="newCpsContinue(n: NormNode): NormNode">newCpsContinue(n: NormNode): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">newCpsPending
  <li><a class="reference" href="#newCpsPending" title="newCpsPending(): PragmaStmt">newCpsPending(): PragmaStmt</a></li>

</ul>
<ul class="simple nested-toc-section">newCpsTerminate
  <li><a class="reference" href="#newCpsTerminate" title="newCpsTerminate(): NormNode">newCpsTerminate(): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">nilAsEmpty
  <li><a class="reference" href="#nilAsEmpty%2CNimNode" title="nilAsEmpty(n: NimNode): NimNode">nilAsEmpty(n: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">pragmaArgument
  <li><a class="reference" href="#pragmaArgument%2CNormNode%2Cstring" title="pragmaArgument(n: NormNode; s: string): NormNode">pragmaArgument(n: NormNode; s: string): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">recover
  <li><a class="reference" href="#recover%2CCallback%5BC%2CR%2CP%5D%2CC" title="recover[C, R, P](callback: Callback[C, R, P]; continuation: var C): R">recover[C, R, P](callback: Callback[C, R, P]; continuation: var C): R</a></li>

</ul>
<ul class="simple nested-toc-section">renderStackFrames
  <li><a class="reference" href="#renderStackFrames" title="renderStackFrames(): seq[string]">renderStackFrames(): seq[string]</a></li>
<li><a class="reference" href="#renderStackFrames%2CContinuation" title="renderStackFrames(c: Continuation): seq[string]">renderStackFrames(c: Continuation): seq[string]</a></li>

</ul>
<ul class="simple nested-toc-section">renderTraceDeque
  <li><a class="reference" href="#renderTraceDeque" title="renderTraceDeque(): seq[string]">renderTraceDeque(): seq[string]</a></li>
<li><a class="reference" href="#renderTraceDeque%2CContinuation" title="renderTraceDeque(c: Continuation): seq[string]">renderTraceDeque(c: Continuation): seq[string]</a></li>

</ul>
<ul class="simple nested-toc-section">stripPragma
  <li><a class="reference" href="#stripPragma%2CNormNode%2Cstatic%5Bstring%5D" title="stripPragma(n: NormNode; s: static[string]): NormNode">stripPragma(n: NormNode; s: static[string]): NormNode</a></li>
<li><a class="reference" href="#stripPragma%2CPragmaStmt%2Cstatic%5Bstring%5D" title="stripPragma(n: PragmaStmt; s: static[string]): PragmaStmt">stripPragma(n: PragmaStmt; s: static[string]): PragmaStmt</a></li>

</ul>
<ul class="simple nested-toc-section">trampoline
  <li><a class="reference" href="#trampoline%2CsinkT" title="trampoline[T: Continuation](c: sink T): T">trampoline[T: Continuation](c: sink T): T</a></li>

</ul>
<ul class="simple nested-toc-section">wrappedFinally
  <li><a class="reference" href="#wrappedFinally%2CNormNode%2CNormNode" title="wrappedFinally(n, final: NormNode): NormNode">wrappedFinally(n, final: NormNode): NormNode</a></li>

</ul>
<ul class="simple nested-toc-section">writeStackFrames
  <li><a class="reference" href="#writeStackFrames" title="writeStackFrames()">writeStackFrames()</a></li>
<li><a class="reference" href="#writeStackFrames%2CContinuation" title="writeStackFrames(c: Continuation)">writeStackFrames(c: Continuation)</a></li>

</ul>
<ul class="simple nested-toc-section">writeTraceDeque
  <li><a class="reference" href="#writeTraceDeque" title="writeTraceDeque()">writeTraceDeque()</a></li>
<li><a class="reference" href="#writeTraceDeque%2CContinuation" title="writeTraceDeque(c: Continuation)">writeTraceDeque(c: Continuation)</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#17" id="67">Macros</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">call
  <li><a class="reference" href="#call.m%2CCallback%5BC%2CR%2CP%5D%2Cvarargs%5Btyped%5D" title="call[C; R; P](callback: Callback[C, R, P]; arguments: varargs[typed]): C">call[C; R; P](callback: Callback[C, R, P]; arguments: varargs[typed]): C</a></li>

</ul>
<ul class="simple nested-toc-section">cpsMagic
  <li><a class="reference" href="#cpsMagic.m%2Cuntyped" title="cpsMagic(n: untyped): untyped">cpsMagic(n: untyped): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">cpsVoodoo
  <li><a class="reference" href="#cpsVoodoo.m%2Cuntyped" title="cpsVoodoo(n: untyped): untyped">cpsVoodoo(n: untyped): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">etype
  <li><a class="reference" href="#etype.m" title="etype(e: enum): string">etype(e: enum): string</a></li>

</ul>
<ul class="simple nested-toc-section">trampolineIt
  <li><a class="reference" href="#trampolineIt.m%2CT%2Cuntyped" title="trampolineIt[T: Continuation](supplied: T; body: untyped)">trampolineIt[T: Continuation](supplied: T; body: untyped)</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#18" id="68">Templates</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">colon
  <li><a class="reference" href="#colon.t%2CNimNode%2CNimNode" title="colon(a, b: NimNode): NimNode">colon(a, b: NimNode): NimNode</a></li>
<li><a class="reference" href="#colon.t%2C%2C" title="colon(a: string | NimNode; b: string | int): NimNode">colon(a: string | NimNode; b: string | int): NimNode</a></li>
<li><a class="reference" href="#colon.t%2Cstring%2CNimNode" title="colon(a: string; b: NimNode): NimNode">colon(a: string; b: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">cpsBootstrap
  <li><a class="reference" href="#cpsBootstrap.t%2Ctyped" title="cpsBootstrap(whelp: typed)">cpsBootstrap(whelp: typed)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsBreak
  <li><a class="reference" href="#cpsBreak.t%2Ctyped" title="cpsBreak(label: typed = nil)">cpsBreak(label: typed = nil)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsCall
  <li><a class="reference" href="#cpsCall.t" title="cpsCall()">cpsCall()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsCallback
  <li><a class="reference" href="#cpsCallback.t" title="cpsCallback()">cpsCallback()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsCallbackShim
  <li><a class="reference" href="#cpsCallbackShim.t%2Ctyped" title="cpsCallbackShim(whelp: typed)">cpsCallbackShim(whelp: typed)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsCont
  <li><a class="reference" href="#cpsCont.t" title="cpsCont()">cpsCont()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsContinue
  <li><a class="reference" href="#cpsContinue.t" title="cpsContinue()">cpsContinue()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsEnvironment
  <li><a class="reference" href="#cpsEnvironment.t%2Ctyped" title="cpsEnvironment(tipe: typed)">cpsEnvironment(tipe: typed)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsHasException
  <li><a class="reference" href="#cpsHasException.t%2Ctyped%2Ctyped" title="cpsHasException(cont, ex: typed)">cpsHasException(cont, ex: typed)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsLift
  <li><a class="reference" href="#cpsLift.t" title="cpsLift()">cpsLift()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsMagicCall
  <li><a class="reference" href="#cpsMagicCall.t" title="cpsMagicCall()">cpsMagicCall()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsMustJump
  <li><a class="reference" href="#cpsMustJump.t" title="cpsMustJump()">cpsMustJump()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsPending
  <li><a class="reference" href="#cpsPending.t" title="cpsPending()">cpsPending()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsResult
  <li><a class="reference" href="#cpsResult.t%2Ctyped" title="cpsResult(result: typed)">cpsResult(result: typed)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsReturnType
  <li><a class="reference" href="#cpsReturnType.t%2Ctyped" title="cpsReturnType(tipe: typed)">cpsReturnType(tipe: typed)</a></li>

</ul>
<ul class="simple nested-toc-section">cpsTerminate
  <li><a class="reference" href="#cpsTerminate.t" title="cpsTerminate()">cpsTerminate()</a></li>

</ul>
<ul class="simple nested-toc-section">cpsVoodooCall
  <li><a class="reference" href="#cpsVoodooCall.t" title="cpsVoodooCall()">cpsVoodooCall()</a></li>

</ul>
<ul class="simple nested-toc-section">debugAnnotation
  <li><a class="reference" href="#debugAnnotation.t%2Ctyped%2CNimNode%2Cuntyped" title="debugAnnotation(s: typed; n: NimNode; body: untyped)">debugAnnotation(s: typed; n: NimNode; body: untyped)</a></li>

</ul>
<ul class="simple nested-toc-section">dot
  <li><a class="reference" href="#dot.t%2CNimNode%2CNimNode" title="dot(a, b: NimNode): NimNode">dot(a, b: NimNode): NimNode</a></li>
<li><a class="reference" href="#dot.t%2CNimNode%2Cstring" title="dot(a: NimNode; b: string): NimNode">dot(a: NimNode; b: string): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">eq
  <li><a class="reference" href="#eq.t%2CNimNode%2CNimNode" title="eq(a, b: NimNode): NimNode">eq(a, b: NimNode): NimNode</a></li>
<li><a class="reference" href="#eq.t%2Cstring%2CNimNode" title="eq(a: string; b: NimNode): NimNode">eq(a: string; b: NimNode): NimNode</a></li>

</ul>
<ul class="simple nested-toc-section">rewriteIt
  <li><a class="reference" href="#rewriteIt.t%2Ctyped%2Cuntyped" title="rewriteIt(n: typed; body: untyped): NormNode">rewriteIt(n: typed; body: untyped): NormNode</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L1" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L1" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

    <div id="tocRoot"></div>
    
    <p class="module-desc">boring utilities likely useful to multiple pieces of cps machinery</p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="rewrites.html">rewrites</a>, <a class="reference external" href="help.html">help</a>, <a class="reference external" href="normalizedast.html">normalizedast</a>
  </dl>
</div>
<div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="Callback">
  <dt><pre><a href="spec.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">;</span> <span class="Identifier">R</span><span class="Other">;</span> <span class="Identifier">P</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">fn</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">P</span>                     <span class="Comment">## </span>
                             <span class="Comment">## the bootstrap for continuation C</span>
  <span class="Identifier">rs</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">C</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">R</span> {.<span class="Identifier">nimcall</span>.} <span class="Comment">## </span>
                                      <span class="Comment">## the result fetcher for continuation C</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L76" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L76" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="Continuation">
  <dt><pre><a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <a href="spec.html#ContinuationObj"><span class="Identifier">ContinuationObj</span></a></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L72" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L72" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="ContinuationObj">
  <dt><pre><a href="spec.html#ContinuationObj"><span class="Identifier">ContinuationObj</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">RootObj</span>
  <span class="Identifier">fn</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">sink</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a> {.<span class="Identifier">nimcall</span>.} <span class="Comment">## </span>
                                                             <span class="Comment">## The `fn` points to the next continuation leg.</span>
  <span class="Identifier">mom</span><span class="Operator">*</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a> <span class="Comment">## </span>
                     <span class="Comment">## If this Continuation was invoked by another Continuation,</span>
                     <span class="Comment">## the `mom` will hold that parent Continuation to form a</span>
                     <span class="Comment">## linked-list approximating a stack.</span>
  <span class="Identifier">ex</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Identifier">Exception</span>         <span class="Comment">## The unhandled exception of the continuation.</span>
  <span class="Keyword">when</span> <span class="Identifier">cpsTraceDeque</span><span class="Other">:</span>
    <span class="Identifier">frames</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">Deque</span><span class="Other">[</span><span class="Identifier">TraceFrame</span><span class="Other">]</span> <span class="Comment">## Tracing for all prior hooks</span>
  <span class="Keyword">when</span> <span class="Identifier">cpsStackFrames</span><span class="Other">:</span>
    <span class="Identifier">stack</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">TraceFrame</span>       <span class="Comment">## Stack-like semantic record</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L60" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L60" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="ContinuationProc">
  <dt><pre><a href="spec.html#ContinuationProc"><span class="Identifier">ContinuationProc</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">sink</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">nimcall</span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L74" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L74" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="Hook">
  <dt><pre><a href="spec.html#Hook"><span class="Identifier">Hook</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Coop</span> <span class="Other">=</span> <span class="StringLit">&quot;coop&quot;</span><span class="Other">,</span>            <span class="Comment">## returns control to the dispatcher</span>
  <span class="Identifier">Trace</span> <span class="Other">=</span> <span class="StringLit">&quot;trace&quot;</span><span class="Other">,</span>          <span class="Comment">## executed at entry to each continuation leg</span>
  <span class="Identifier">Alloc</span> <span class="Other">=</span> <span class="StringLit">&quot;alloc&quot;</span><span class="Other">,</span>          <span class="Comment">## performs allocation of a new continuation</span>
  <span class="Identifier">Dealloc</span> <span class="Other">=</span> <span class="StringLit">&quot;dealloc&quot;</span><span class="Other">,</span>      <span class="Comment">## performs deallocation of a continuation</span>
  <span class="Identifier">Pass</span> <span class="Other">=</span> <span class="StringLit">&quot;pass&quot;</span><span class="Other">,</span>            <span class="Comment">## transfers control-flow between continuations</span>
  <span class="Identifier">Boot</span> <span class="Other">=</span> <span class="StringLit">&quot;boot&quot;</span><span class="Other">,</span>            <span class="Comment">## prepares a continuation for initial use</span>
  <span class="Identifier">Unwind</span> <span class="Other">=</span> <span class="StringLit">&quot;unwind&quot;</span><span class="Other">,</span>        <span class="Comment">## controlled &quot;bubble-up&quot; for exception handling</span>
  <span class="Identifier">Head</span> <span class="Other">=</span> <span class="StringLit">&quot;head&quot;</span><span class="Other">,</span>            <span class="Comment">## invoked when a new continuation has no parent</span>
  <span class="Identifier">Tail</span> <span class="Other">=</span> <span class="StringLit">&quot;tail&quot;</span><span class="Other">,</span>            <span class="Comment">## invoked when a new continuation has a parent</span>
  <span class="Identifier">Stack</span> <span class="Other">=</span> <span class="StringLit">&quot;stack&quot;</span>            <span class="Comment">## invoked to annotate stack semantics</span></pre></dt>
  <dd>
    
    these are hook procedure names; the string value matches the name of the symbol we'll call to perform the hook.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L87" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L87" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="State">
  <dt><pre><a href="spec.html#State"><span class="Identifier">State</span></a> {.<span class="Identifier">pure</span>.} <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Running</span><span class="Other">,</span>                  <span class="Comment">## The continuation is active and running and can be resumed</span>
  <span class="Identifier">Dismissed</span><span class="Other">,</span>                <span class="Comment">## The continuation is currently somewhere else</span>
  <span class="Identifier">Finished</span>                   <span class="Comment">## The continuation is finished and can no longer be resumed</span></pre></dt>
  <dd>
    
    Representation of the state of a continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L388" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L388" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="TraceFrame">
  <dt><pre><a href="spec.html#TraceFrame"><span class="Identifier">TraceFrame</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">hook</span><span class="Operator">*</span><span class="Other">:</span> <a href="spec.html#Hook"><span class="Identifier">Hook</span></a>                <span class="Comment">## the hook that provoked the trace entry</span>
  <span class="Identifier">fun</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>               <span class="Comment">## a short label for the notable symbol</span>
  <span class="Identifier">info</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">LineInfo</span>            <span class="Comment">## the source of the notable symbol</span></pre></dt>
  <dd>
    
    a record of where the continuation has been
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L82" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L82" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

  </dl>
</div>
<div class="section" id="10">
  <h1><a class="toc-backref" href="#10">Consts</a></h1>
  <dl class="item">
    <div id="cpsCallOperatorSupported">
  <dt><pre><a href="spec.html#cpsCallOperatorSupported"><span class="Identifier">cpsCallOperatorSupported</span></a> <span class="Other">=</span> <span class="DecNumber">true</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L14" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L14" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="cpsStackFrames">
  <dt><pre><a href="spec.html#cpsStackFrames"><span class="Identifier">cpsStackFrames</span></a> {.<span class="Identifier">booldefine</span><span class="Other">,</span> <span class="Identifier">used</span>.} <span class="Other">=</span> <span class="DecNumber">true</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L55" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L55" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="cpsTraceDeque">
  <dt><pre><a href="spec.html#cpsTraceDeque"><span class="Identifier">cpsTraceDeque</span></a> {.<span class="Identifier">booldefine</span><span class="Other">,</span> <span class="Identifier">used</span>.} <span class="Other">=</span> <span class="DecNumber">true</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L56" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L56" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="traceDequeSize">
  <dt><pre><a href="spec.html#traceDequeSize"><span class="Identifier">traceDequeSize</span></a> {.<span class="Identifier">intdefine</span><span class="Other">,</span> <span class="Identifier">used</span>.} <span class="Other">=</span> <span class="DecNumber">4096</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L57" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L57" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="bootstrapSymbol-procs-all">
  <div id="bootstrapSymbol,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#bootstrapSymbol%2CNimNode"><span class="Identifier">bootstrapSymbol</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    find the return type of the bootstrap
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L354" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L354" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="breakLabel-procs-all">
  <div id="breakLabel,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#breakLabel%2CNormNode"><span class="Identifier">breakLabel</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return the break label of a <tt class="docutils literal"><span class="pre"><span class="Keyword">break</span></span></tt> statement or a <tt class="docutils literal"><span class="pre"><span class="Identifier">cpsBreak</span></span></tt> annotation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L205" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L205" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="copyOrVoid-procs-all">
  <div id="copyOrVoid,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#copyOrVoid%2CNimNode"><span class="Identifier">copyOrVoid</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    if the node is empty, <tt class="docutils literal"><span class="pre"><span class="RawData">ident&quot;void&quot;</span></span></tt>; else, a copy of the node
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L589" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L589" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsCallbackTypeDef-procs-all">
  <div id="cpsCallbackTypeDef,NimNode,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#cpsCallbackTypeDef%2CNimNode%2CNimNode"><span class="Identifier">cpsCallbackTypeDef</span></a><span class="Other">(</span><span class="Identifier">tipe</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">;</span> <span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    looks like cpsTransformProc but applies to proc typedefs; this is where we create our calling convention concept
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L615" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L615" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="createCallback-procs-all">
  <div id="createCallback,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#createCallback%2CNimNode"><span class="Identifier">createCallback</span></a><span class="Other">(</span><span class="Identifier">sym</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    create a new Callback object construction
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L596" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L596" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="emptyAsNil-procs-all">
  <div id="emptyAsNil,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#emptyAsNil%2CNimNode"><span class="Identifier">emptyAsNil</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    normalize nil, nnkEmpty to nnkNilLit
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L575" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L575" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="enbasen-procs-all">
  <div id="enbasen,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#enbasen%2CNimNode"><span class="Identifier">enbasen</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <a href="normalizedast.html#TypeExpr"><span class="Identifier">TypeExpr</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    find the parent type of the given symbol/type
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L371" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L371" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="ensimilate-procs-all">
  <div id="ensimilate,NormNode,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#ensimilate%2CNormNode%2CNormNode"><span class="Identifier">ensimilate</span></a><span class="Other">(</span><span class="Identifier">source</span><span class="Other">,</span> <span class="Identifier">destination</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <a href="normalizedast.html#Call"><span class="Identifier">Call</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    perform a call to convert the destination to the source's type; the source can be any of a few usual suspects...
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L544" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L544" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="filterPragma-procs-all">
  <div id="filterPragma,seq[PragmaAtom],Name">
  <dt><pre><span class="Keyword">proc</span> <a href="#filterPragma%2Cseq%5BPragmaAtom%5D%2CName"><span class="Identifier">filterPragma</span></a><span class="Other">(</span><span class="Identifier">ns</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><a href="normalizedast.html#PragmaAtom"><span class="Identifier">PragmaAtom</span></a><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">liftee</span><span class="Other">:</span> <a href="normalizedast.html#Name"><span class="Identifier">Name</span></a><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L136" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L136" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="getContSym-procs-all">
  <div id="getContSym,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#getContSym%2CNormNode"><span class="Identifier">getContSym</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <a href="normalizedast.html#Name"><span class="Identifier">Name</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Retrieve the continuation symbol from <tt class="docutils literal"><span class="pre"><span class="Identifier">n</span></span></tt>, provided that <tt class="docutils literal"><span class="pre"><span class="Identifier">n</span></span></tt> is a cpsCont.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L221" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L221" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="hash-procs-all">
  <div id="hash,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#hash%2CNimNode"><span class="Identifier">hash</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Hash</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Hash a NimNode via it's representation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L169" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L169" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsBlock-procs-all">
  <div id="isCpsBlock,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isCpsBlock%2CNormNode"><span class="Identifier">isCpsBlock</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> if the block <tt class="docutils literal"><span class="pre"><span class="Identifier">n</span></span></tt> contains a cps call anywhere at all; this is used to figure out if a block needs tailcall handling...
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L307" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L307" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsBreak-procs-all">
  <div id="isCpsBreak,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isCpsBreak%2CNormNode"><span class="Identifier">isCpsBreak</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return whether a node is a {.cpsBreak.} annotation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L193" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L193" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsCall-procs-all">
  <div id="isCpsCall,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isCpsCall%2CNormNode"><span class="Identifier">isCpsCall</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    true if this node holds a call to a cps procedure
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L283" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L283" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsCont-procs-all">
  <div id="isCpsCont,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isCpsCont%2CNormNode"><span class="Identifier">isCpsCont</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return whether the given procedure is a cps continuation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L217" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L217" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsContinue-procs-all">
  <div id="isCpsContinue,NormNode">
  <dt><pre><span class="Keyword">func</span> <a href="#isCpsContinue%2CNormNode"><span class="Identifier">isCpsContinue</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return whether a node is a {.cpsContinue.} annotation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L201" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L201" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsConvCall-procs-all">
  <div id="isCpsConvCall,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isCpsConvCall%2CNormNode"><span class="Identifier">isCpsConvCall</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    true if this node holds a cps call that might be nested within one or more conversions.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L298" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L298" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsPending-procs-all">
  <div id="isCpsPending,NormNode">
  <dt><pre><span class="Keyword">func</span> <a href="#isCpsPending%2CNormNode"><span class="Identifier">isCpsPending</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return whether a node is a {.cpsPending.} annotation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L179" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L179" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isCpsTerminate-procs-all">
  <div id="isCpsTerminate,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isCpsTerminate%2CNormNode"><span class="Identifier">isCpsTerminate</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return whether <tt class="docutils literal"><span class="pre"><span class="Identifier">n</span></span></tt> is a cpsTerminate annotation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L233" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L233" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isScopeExit-procs-all">
  <div id="isScopeExit,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isScopeExit%2CNormNode"><span class="Identifier">isScopeExit</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Return whether the given node signify a CPS scope exit
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L237" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L237" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="isVoodooCall-procs-all">
  <div id="isVoodooCall,NormNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#isVoodooCall%2CNormNode"><span class="Identifier">isVoodooCall</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    true if this is a call to a voodoo procedure
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L277" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L277" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="makeErrorShim-procs-all">
  <div id="makeErrorShim,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#makeErrorShim%2CNimNode"><span class="Identifier">makeErrorShim</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Upgrades a procedure to serve as a CPS primitive, generating errors out of <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="Identifier">cps</span><span class="Operator">.</span></span></tt> context and taking continuations as input.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L394" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L394" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="matchCpsBreak-procs-all">
  <div id="matchCpsBreak">
  <dt><pre><span class="Keyword">func</span> <a href="#matchCpsBreak"><span class="Identifier">matchCpsBreak</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormMatcher"><span class="Identifier">NormMatcher</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    create a matcher matching cpsBreak with an empty label
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L264" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L264" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="matchCpsBreak,NormNode">
  <dt><pre><span class="Keyword">func</span> <a href="#matchCpsBreak%2CNormNode"><span class="Identifier">matchCpsBreak</span></a><span class="Other">(</span><span class="Identifier">label</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormMatcher"><span class="Identifier">NormMatcher</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    create a matcher matching cpsBreak with the given label and cpsBreak without any label
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L253" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L253" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="newCpsBreak-procs-all">
  <div id="newCpsBreak,NormNode">
  <dt><pre><span class="Keyword">func</span> <a href="#newCpsBreak%2CNormNode"><span class="Identifier">newCpsBreak</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">;</span> <span class="Identifier">label</span> <span class="Other">=</span> <span class="Identifier">newNilLit</span><span class="Other">(</span><span class="Other">)</span><span class="Other">.</span><span class="Identifier">NormNode</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L183" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L183" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="newCpsContinue-procs-all">
  <div id="newCpsContinue,NormNode">
  <dt><pre><span class="Keyword">func</span> <a href="#newCpsContinue%2CNormNode"><span class="Identifier">newCpsContinue</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L197" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L197" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="newCpsPending-procs-all">
  <div id="newCpsPending">
  <dt><pre><span class="Keyword">func</span> <a href="#newCpsPending"><span class="Identifier">newCpsPending</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="normalizedast.html#PragmaStmt"><span class="Identifier">PragmaStmt</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Produce a {.cpsPending.} annotation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L175" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L175" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="newCpsTerminate-procs-all">
  <div id="newCpsTerminate">
  <dt><pre><span class="Keyword">proc</span> <a href="#newCpsTerminate"><span class="Identifier">newCpsTerminate</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L229" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L229" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="nilAsEmpty-procs-all">
  <div id="nilAsEmpty,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#nilAsEmpty%2CNimNode"><span class="Identifier">nilAsEmpty</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    normalize nil, nnkNilLit to nnkEmpty
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L568" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L568" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="pragmaArgument-procs-all">
  <div id="pragmaArgument,NormNode,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#pragmaArgument%2CNormNode%2Cstring"><span class="Identifier">pragmaArgument</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    from foo() or proc foo() {.some: Pragma.}, retrieve Pragma
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L332" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L332" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="recover-procs-all">
  <div id="recover,Callback[C,R,P],C">
  <dt><pre><span class="Keyword">proc</span> <a href="#recover%2CCallback%5BC%2CR%2CP%5D%2CC"><span class="Identifier">recover</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">,</span> <span class="Identifier">R</span><span class="Other">,</span> <span class="Identifier">P</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">callback</span><span class="Other">:</span> <a href="spec.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">,</span> <span class="Identifier">R</span><span class="Other">,</span> <span class="Identifier">P</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">continuation</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">C</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">R</span></pre></dt>
  <dd>
    
    <p>Using a <tt class="docutils literal"><span class="pre"><span class="Identifier">callback</span></span></tt>, recover the <tt class="docutils literal"><span class="pre"><span class="Identifier">result</span></span></tt> of the given <tt class="docutils literal"><span class="pre"><span class="Identifier">continuation</span></span></tt>. This is equivalent to running <tt class="docutils literal"><span class="pre"><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> on a continuation which was created with <tt class="docutils literal"><span class="pre"><span class="Identifier">whelp</span></span></tt> against a procedure call.</p>
<p>If the continuation is in the <tt class="docutils literal"><span class="pre"><span class="Identifier">running</span></span></tt> <tt class="docutils literal"><span class="pre"><span class="Identifier">State</span></span></tt>, this operation will <tt class="docutils literal"><span class="pre"><span class="Identifier">trampoline</span></span></tt> the continuation until it is <tt class="docutils literal"><span class="pre"><span class="Identifier">finished</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">result</span></span></tt> will then be recovered from the continuation environment.</p>
<p>It is a <tt class="docutils literal"><span class="pre"><span class="Identifier">Defect</span></span></tt> to attempt to recover the <tt class="docutils literal"><span class="pre"><span class="Identifier">result</span></span></tt> of a <tt class="docutils literal"><span class="pre"><span class="Identifier">dismissed</span></span></tt> <tt class="docutils literal"><span class="pre"><span class="Identifier">continuation</span></span></tt>.</p>

    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L626" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L626" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="renderStackFrames-procs-all">
  <div id="renderStackFrames">
  <dt><pre><span class="Keyword">proc</span> <a href="#renderStackFrames"><span class="Identifier">renderStackFrames</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span class="Identifier">cpsVoodooCall</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
                                        <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L464" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L464" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="renderStackFrames,Continuation">
  <dt><pre><span class="Keyword">proc</span> <a href="#renderStackFrames%2CContinuation"><span class="Identifier">renderStackFrames</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Render a &quot;stack&quot; trace for the continuation as a sequence of lines.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L464" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L464" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="renderTraceDeque-procs-all">
  <div id="renderTraceDeque">
  <dt><pre><span class="Keyword">proc</span> <a href="#renderTraceDeque"><span class="Identifier">renderTraceDeque</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span class="Identifier">cpsVoodooCall</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
                                       <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L468" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L468" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="renderTraceDeque,Continuation">
  <dt><pre><span class="Keyword">proc</span> <a href="#renderTraceDeque%2CContinuation"><span class="Identifier">renderTraceDeque</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Render a traceback for the continuation as a sequence of lines.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L468" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L468" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="stripPragma-procs-all">
  <div id="stripPragma,NormNode,static[string]">
  <dt><pre><span class="Keyword">proc</span> <a href="#stripPragma%2CNormNode%2Cstatic%5Bstring%5D"><span class="Identifier">stripPragma</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">static</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a></pre></dt>
  <dd>
    
    filter a pragma with the matching name from various nodes
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L144" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L144" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="stripPragma,PragmaStmt,static[string]">
  <dt><pre><span class="Keyword">proc</span> <a href="#stripPragma%2CPragmaStmt%2Cstatic%5Bstring%5D"><span class="Identifier">stripPragma</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <a href="normalizedast.html#PragmaStmt"><span class="Identifier">PragmaStmt</span></a><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">static</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="normalizedast.html#PragmaStmt"><span class="Identifier">PragmaStmt</span></a></pre></dt>
  <dd>
    
    filter a pragma with the matching name
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L140" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L140" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="trampoline-procs-all">
  <div id="trampoline,sinkT">
  <dt><pre><span class="Keyword">proc</span> <a href="#trampoline%2CsinkT"><span class="Identifier">trampoline</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">sink</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
  <dd>
    
    This is the basic trampoline: it will run the continuation until the continuation is no longer in the <tt class="docutils literal"><span class="pre"><span class="Identifier">Running</span></span></tt> state.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L504" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L504" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="wrappedFinally-procs-all">
  <div id="wrappedFinally,NormNode,NormNode">
  <dt><pre><span class="Keyword">func</span> <a href="#wrappedFinally%2CNormNode%2CNormNode"><span class="Identifier">wrappedFinally</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">,</span> <span class="Identifier">final</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    rewrite a try/except/finally into try/try-except/finally
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L268" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L268" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="writeStackFrames-procs-all">
  <div id="writeStackFrames">
  <dt><pre><span class="Keyword">proc</span> <a href="#writeStackFrames"><span class="Identifier">writeStackFrames</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">cpsVoodooCall</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L495" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L495" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="writeStackFrames,Continuation">
  <dt><pre><span class="Keyword">proc</span> <a href="#writeStackFrames%2CContinuation"><span class="Identifier">writeStackFrames</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Write a &quot;stack&quot; trace for the continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L495" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L495" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="writeTraceDeque-procs-all">
  <div id="writeTraceDeque">
  <dt><pre><span class="Keyword">proc</span> <a href="#writeTraceDeque"><span class="Identifier">writeTraceDeque</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">cpsVoodooCall</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L499" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L499" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="writeTraceDeque,Continuation">
  <dt><pre><span class="Keyword">proc</span> <a href="#writeTraceDeque%2CContinuation"><span class="Identifier">writeTraceDeque</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">]</span><span class="Other">,</span>
                                        <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Write a traceback for the continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L499" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L499" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="17">
  <h1><a class="toc-backref" href="#17">Macros</a></h1>
  <dl class="item">
    <div id="call-macros-all">
  <div id="call.m,Callback[C,R,P],varargs[typed]">
  <dt><pre><span class="Keyword">macro</span> <a href="#call.m%2CCallback%5BC%2CR%2CP%5D%2Cvarargs%5Btyped%5D"><span class="Identifier">call</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">;</span> <span class="Identifier">R</span><span class="Other">;</span> <span class="Identifier">P</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">callback</span><span class="Other">:</span> <a href="spec.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">,</span> <span class="Identifier">R</span><span class="Other">,</span> <span class="Identifier">P</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">arguments</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">typed</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">C</span></pre></dt>
  <dd>
    
    Invoke a <tt class="docutils literal"><span class="pre"><span class="Identifier">callback</span></span></tt> with the given <tt class="docutils literal"><span class="pre"><span class="Identifier">arguments</span></span></tt>; returns a continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L639" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L639" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsMagic-macros-all">
  <div id="cpsMagic.m,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#cpsMagic.m%2Cuntyped"><span class="Identifier">cpsMagic</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    <p>Applied to a procedure to generate a version which lacks the first argument and return value, which are those of a <tt class="docutils literal"><span class="pre"><span class="Identifier">Continuation</span></span></tt>.</p>
<p>This new magical will compile correctly inside CPS procedures though it never takes a <tt class="docutils literal"><span class="pre"><span class="Identifier">Continuation</span></span></tt> argument and produces no return value.</p>
<p>The target procedure of a cpsMagic pragma returns the <tt class="docutils literal"><span class="pre"><span class="Identifier">Continuation</span></span></tt> to which control-flow should return; this is usually the same value passed into the procedure, but this is not required nor is it checked!</p>

    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L410" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L410" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsVoodoo-macros-all">
  <div id="cpsVoodoo.m,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#cpsVoodoo.m%2Cuntyped"><span class="Identifier">cpsVoodoo</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    Similar to a <tt class="docutils literal"><span class="pre"><span class="Identifier">cpsMagic</span></span></tt> where the first argument is concerned, but may specify a return value which is usable inside the CPS procedure.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L432" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L432" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="etype-macros-all">
  <div id="etype.m">
  <dt><pre><span class="Keyword">macro</span> <a href="#etype.m"><span class="Identifier">etype</span></a><span class="Other">(</span><span class="Identifier">e</span><span class="Other">:</span> <span class="Keyword">enum</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
  <dd>
    
    Coop -&gt; &quot;Coop&quot;, not &quot;coop&quot;
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L582" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L582" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="trampolineIt-macros-all">
  <div id="trampolineIt.m,T,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#trampolineIt.m%2CT%2Cuntyped"><span class="Identifier">trampolineIt</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">supplied</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
  <dd>
    
    This trampoline allows the user to interact with the continuation prior to each leg of its execution.  The continuation will be exposed by a variable named <tt class="docutils literal"><span class="pre"><span class="Identifier">it</span></span></tt> inside the <tt class="docutils literal"><span class="pre"><span class="Identifier">body</span></span></tt>.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L519" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L519" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="18">
  <h1><a class="toc-backref" href="#18">Templates</a></h1>
  <dl class="item">
    <div id="colon-templates-all">
  <div id="colon.t,NimNode,NimNode">
  <dt><pre><span class="Keyword">template</span> <a href="#colon.t%2CNimNode%2CNimNode"><span class="Identifier">colon</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing foo: bar in a ctor
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L124" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L124" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="colon.t,,">
  <dt><pre><span class="Keyword">template</span> <a href="#colon.t%2C%2C"><span class="Identifier">colon</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Operator">|</span> <span class="Identifier">NimNode</span><span class="Other">;</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Operator">|</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing foo: bar in a ctor
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L132" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L132" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="colon.t,string,NimNode">
  <dt><pre><span class="Keyword">template</span> <a href="#colon.t%2Cstring%2CNimNode"><span class="Identifier">colon</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing foo: bar in a ctor
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L128" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L128" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsBootstrap-templates-all">
  <div id="cpsBootstrap.t,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsBootstrap.t%2Ctyped"><span class="Identifier">cpsBootstrap</span></a><span class="Other">(</span><span class="Identifier">whelp</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    the symbol for creating a continuation -- technically, a whelp()
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L38" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L38" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsBreak-templates-all">
  <div id="cpsBreak.t,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsBreak.t%2Ctyped"><span class="Identifier">cpsBreak</span></a><span class="Other">(</span><span class="Identifier">label</span><span class="Other">:</span> <span class="Identifier">typed</span> <span class="Other">=</span> <span class="Keyword">nil</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    this is a break statement in a cps block
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L33" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L33" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsCall-templates-all">
  <div id="cpsCall.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsCall.t"><span class="Identifier">cpsCall</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    a cps call
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L28" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L28" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsCallback-templates-all">
  <div id="cpsCallback.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsCallback.t"><span class="Identifier">cpsCallback</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    this is a callback typedef
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L40" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L40" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsCallbackShim-templates-all">
  <div id="cpsCallbackShim.t,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsCallbackShim.t%2Ctyped"><span class="Identifier">cpsCallbackShim</span></a><span class="Other">(</span><span class="Identifier">whelp</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    the symbol for creating a continuation which returns a continuation base
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L41" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L41" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsCont-templates-all">
  <div id="cpsCont.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsCont.t"><span class="Identifier">cpsCont</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    this is a continuation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L37" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L37" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsContinue-templates-all">
  <div id="cpsContinue.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsContinue.t"><span class="Identifier">cpsContinue</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    this is a continue statement in a cps block
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L35" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L35" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsEnvironment-templates-all">
  <div id="cpsEnvironment.t,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsEnvironment.t%2Ctyped"><span class="Identifier">cpsEnvironment</span></a><span class="Other">(</span><span class="Identifier">tipe</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    the environment type that composed the target
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L43" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L43" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsHasException-templates-all">
  <div id="cpsHasException.t,typed,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsHasException.t%2Ctyped%2Ctyped"><span class="Identifier">cpsHasException</span></a><span class="Other">(</span><span class="Identifier">cont</span><span class="Other">,</span> <span class="Identifier">ex</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    the continuation has an exception stored in <tt class="docutils literal"><span class="pre"><span class="Identifier">ex</span></span></tt>, with <tt class="docutils literal"><span class="pre"><span class="Identifier">cont</span></span></tt> being the continuation symbol used.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L50" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L50" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsLift-templates-all">
  <div id="cpsLift.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsLift.t"><span class="Identifier">cpsLift</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    lift this proc|type
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L27" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L27" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsMagicCall-templates-all">
  <div id="cpsMagicCall.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsMagicCall.t"><span class="Identifier">cpsMagicCall</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    a magic call
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L29" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L29" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsMustJump-templates-all">
  <div id="cpsMustJump.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsMustJump.t"><span class="Identifier">cpsMustJump</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    cps calls and magic calls jump
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L31" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L31" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsPending-templates-all">
  <div id="cpsPending.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsPending.t"><span class="Identifier">cpsPending</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    this is the last continuation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L32" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L32" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsResult-templates-all">
  <div id="cpsResult.t,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsResult.t%2Ctyped"><span class="Identifier">cpsResult</span></a><span class="Other">(</span><span class="Identifier">result</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    the procedure that returns the result of the continuation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L45" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L45" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsReturnType-templates-all">
  <div id="cpsReturnType.t,typed">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsReturnType.t%2Ctyped"><span class="Identifier">cpsReturnType</span></a><span class="Other">(</span><span class="Identifier">tipe</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    the return type of the continuation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L47" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L47" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsTerminate-templates-all">
  <div id="cpsTerminate.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsTerminate.t"><span class="Identifier">cpsTerminate</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    this is the end of this procedure
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L49" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L49" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cpsVoodooCall-templates-all">
  <div id="cpsVoodooCall.t">
  <dt><pre><span class="Keyword">template</span> <a href="#cpsVoodooCall.t"><span class="Identifier">cpsVoodooCall</span></a><span class="Other">(</span><span class="Other">)</span> {.<span class="Identifier">pragma</span>.}</pre></dt>
  <dd>
    
    a voodoo call
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L30" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L30" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="debugAnnotation-templates-all">
  <div id="debugAnnotation.t,typed,NimNode,untyped">
  <dt><pre><span class="Keyword">template</span> <a href="#debugAnnotation.t%2Ctyped%2CNimNode%2Cuntyped"><span class="Identifier">debugAnnotation</span></a><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">;</span> <span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span> {.<span class="Identifier">dirty</span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L247" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L247" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dot-templates-all">
  <div id="dot.t,NimNode,NimNode">
  <dt><pre><span class="Keyword">template</span> <a href="#dot.t%2CNimNode%2CNimNode"><span class="Identifier">dot</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing foo.bar
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L108" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L108" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="dot.t,NimNode,string">
  <dt><pre><span class="Keyword">template</span> <a href="#dot.t%2CNimNode%2Cstring"><span class="Identifier">dot</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">;</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing <tt class="docutils literal"><span class="pre"><span class="Operator">.</span></span></tt>(foo, &quot;bar&quot;)
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L112" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L112" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="eq-templates-all">
  <div id="eq.t,NimNode,NimNode">
  <dt><pre><span class="Keyword">template</span> <a href="#eq.t%2CNimNode%2CNimNode"><span class="Identifier">eq</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">,</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing foo=bar in a call
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L116" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L116" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="eq.t,string,NimNode">
  <dt><pre><span class="Keyword">template</span> <a href="#eq.t%2Cstring%2CNimNode"><span class="Identifier">eq</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">b</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span></pre></dt>
  <dd>
    
    for constructing foo=bar in a call
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L120" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L120" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="rewriteIt-templates-all">
  <div id="rewriteIt.t,typed,untyped">
  <dt><pre><span class="Keyword">template</span> <a href="#rewriteIt.t%2Ctyped%2Cuntyped"><span class="Identifier">rewriteIt</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <a href="rewrites.html#NormNode"><span class="Identifier">NormNode</span></a></pre></dt>
  <dd>
    
    
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps/spec.nim#L241" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps/spec.nim#L241" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2024-01-17 19:03:01 UTC</small>
      </div>
    </div>
  </div>
  
  <!-- Google fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</body>
</html>
