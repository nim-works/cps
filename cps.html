<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cps</title>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="nimdoc.out.css?v=2.1.1">

<!-- JS -->
<script type="text/javascript" src="dochack.js?v=2.1.1"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">cps</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" oninput="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">alloc
  <li><a class="reference" href="#alloc%2Ctypedesc%5BT%5D%2Ctypedesc" title="alloc[T: Continuation](U: typedesc[T]; E: typedesc): E:type">alloc[T: Continuation](U: typedesc[T]; E: typedesc): E:type</a></li>

</ul>
<ul class="simple nested-toc-section">dealloc
  <li><a class="reference" href="#dealloc%2CsinkT%2Ctypedesc%5BT%5D" title="dealloc[T: Continuation](c: sink T; E: typedesc[T]): E:type">dealloc[T: Continuation](c: sink T; E: typedesc[T]): E:type</a></li>

</ul>
<ul class="simple nested-toc-section">disarm
  <li><a class="reference" href="#disarm%2CT" title="disarm[T: Continuation](c: T)">disarm[T: Continuation](c: T)</a></li>

</ul>
<ul class="simple nested-toc-section">state
  <li><a class="reference" href="#state%2CContinuation" title="state(c: Continuation): State">state(c: Continuation): State</a></li>

</ul>
<ul class="simple nested-toc-section">tail
  <li><a class="reference" href="#tail%2CContinuation%2CT" title="tail[T: Continuation](parent: Continuation; child: T): T">tail[T: Continuation](parent: Continuation; child: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">traceDeque
  <li><a class="reference" href="#traceDeque%2CHook%2CNimNode%2CNimNode%2Cstring%2CLineInfo%2CNimNode" title="traceDeque(hook: Hook; c, n: NimNode; fun: string; info: LineInfo; body: NimNode): NimNode">traceDeque(hook: Hook; c, n: NimNode; fun: string; info: LineInfo; body: NimNode): NimNode</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#17" id="67">Macros</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">()
  <li><a class="reference" href="#%28%29.m%2CCallback%5BC%2CR%2CP%5D%2Cvarargs%5Btyped%5D" title="`()`[C; R; P](callback: Callback[C, R, P]; arguments: varargs[typed]): R">`()`[C; R; P](callback: Callback[C, R, P]; arguments: varargs[typed]): R</a></li>

</ul>
<ul class="simple nested-toc-section">cps
  <li><a class="reference" href="#cps.m%2Ctyped%2Cuntyped" title="cps(tipe: typed; n: untyped): untyped">cps(tipe: typed; n: untyped): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">stack
  <li><a class="reference" href="#stack.m%2CTraceFrame%2CT" title="stack[T: Continuation](frame: TraceFrame; target: T): T">stack[T: Continuation](frame: TraceFrame; target: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">trace
  <li><a class="reference" href="#trace.m%2Cstatic%5BHook%5D%2Ctyped%2Ctyped%2Cstring%2CLineInfo%2Ctyped" title="trace(hook: static[Hook]; source, target: typed; fun: string; info: LineInfo;
      body: typed): untyped">trace(hook: static[Hook]; source, target: typed; fun: string; info: LineInfo;
      body: typed): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">whelp
  <li><a class="reference" href="#whelp.m%2Ctyped" title="whelp(call: typed): untyped">whelp(call: typed): untyped</a></li>
<li><a class="reference" href="#whelp.m%2CContinuation%2Ctyped" title="whelp(parent: Continuation; call: typed): untyped">whelp(parent: Continuation; call: typed): untyped</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#18" id="68">Templates</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">boot
  <li><a class="reference" href="#boot.t%2CT" title="boot[T: Continuation](c: T): T">boot[T: Continuation](c: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">coop
  <li><a class="reference" href="#coop.t%2CT" title="coop[T: Continuation](c: T): T">coop[T: Continuation](c: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">dismissed
  <li><a class="reference" href="#dismissed.t%2CContinuation" title="dismissed(c: Continuation): bool">dismissed(c: Continuation): bool</a></li>

</ul>
<ul class="simple nested-toc-section">finished
  <li><a class="reference" href="#finished.t%2CContinuation" title="finished(c: Continuation): bool">finished(c: Continuation): bool</a></li>

</ul>
<ul class="simple nested-toc-section">head
  <li><a class="reference" href="#head.t%2CT" title="head[T: Continuation](first: T): T">head[T: Continuation](first: T): T</a></li>

</ul>
<ul class="simple nested-toc-section">recover
  <li><a class="reference" href="#recover.t%2CContinuation" title="recover(c: Continuation): untyped">recover(c: Continuation): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">running
  <li><a class="reference" href="#running.t%2CContinuation" title="running(c: Continuation): bool">running(c: Continuation): bool</a></li>

</ul>
<ul class="simple nested-toc-section">whelpIt
  <li><a class="reference" href="#whelpIt.t%2Ctyped%2Cuntyped" title="whelpIt(input: typed; body: untyped): untyped">whelpIt(input: typed; body: untyped): untyped</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L1" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L1" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

    <div id="tocRoot"></div>
    
    <p class="module-desc"></p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="cps/spec.html">cps/spec</a>, <a class="reference external" href="cps/transform.html">cps/transform</a>, <a class="reference external" href="cps/rewrites.html">cps/rewrites</a>, <a class="reference external" href="cps/hooks.html">cps/hooks</a>, <a class="reference external" href="cps/exprs.html">cps/exprs</a>, <a class="reference external" href="cps/normalizedast.html">cps/normalizedast</a>, <a class="reference external" href="cps/returns.html">cps/returns</a>
  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="alloc-procs-all">
  <div id="alloc,typedesc[T],typedesc">
  <dt><pre><span class="Keyword">proc</span> <a href="#alloc%2Ctypedesc%5BT%5D%2Ctypedesc"><span class="Identifier">alloc</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">U</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">E</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">E:type</span> {.<span class="Identifier">used</span><span class="Other">,</span> <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to customize continuation allocation; <tt class="docutils literal"><span class="pre"><span class="Identifier">U</span></span></tt> is the type supplied by the user as the <tt class="docutils literal"><span class="pre"><span class="Identifier">cps</span></span></tt> macro argument, while <tt class="docutils literal"><span class="pre"><span class="Identifier">E</span></span></tt> is the type of the environment composed for the specific continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L301" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L301" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dealloc-procs-all">
  <div id="dealloc,sinkT,typedesc[T]">
  <dt><pre><span class="Keyword">proc</span> <a href="#dealloc%2CsinkT%2Ctypedesc%5BT%5D"><span class="Identifier">dealloc</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">sink</span> <span class="Identifier">T</span><span class="Other">;</span> <span class="Identifier">E</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">E:type</span> {.<span class="Identifier">used</span><span class="Other">,</span> <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to customize continuation deallocation; <tt class="docutils literal"><span class="pre"><span class="Identifier">c</span></span></tt> is the continuation to be deallocated, while <tt class="docutils literal"><span class="pre"><span class="Identifier">E</span></span></tt> is the type of its environment.  This procedure should generally return <tt class="docutils literal"><span class="pre"><span class="Keyword">nil</span></span></tt>, as its result may be assigned to another continuation reference.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L308" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L308" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="disarm-procs-all">
  <div id="disarm,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#disarm%2CT"><span class="Identifier">disarm</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span> {.<span class="Identifier">used</span><span class="Other">,</span> <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to customize preparation of a continuation for deallocation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L293" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L293" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="state-procs-all">
  <div id="state,Continuation">
  <dt><pre><span class="Keyword">proc</span> <a href="#state%2CContinuation"><span class="Identifier">state</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <a href="cps/spec.html#State"><span class="Identifier">State</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Get the current state of a continuation
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L31" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L31" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="tail-procs-all">
  <div id="tail,Continuation,T">
  <dt><pre><span class="Keyword">proc</span> <a href="#tail%2CContinuation%2CT"><span class="Identifier">tail</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">parent</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">;</span> <span class="Identifier">child</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">used</span><span class="Other">,</span> <span class="Identifier">inline</span>.}</pre></dt>
  <dd>
    
    <p>Reimplement this symbol to configure a continuation for use when it has been instantiated from inside another continuation; currently, this means assigning the parent to the child's <tt class="docutils literal"><span class="pre"><span class="Identifier">mom</span></span></tt> field. The return value specifies the child continuation.</p>
<p>NOTE: If you implement this as a template, be careful that you assign the child to a variable before manipulating its fields, as it may be an expression...</p>

    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L168" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L168" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="traceDeque-procs-all">
  <div id="traceDeque,Hook,NimNode,NimNode,string,LineInfo,NimNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#traceDeque%2CHook%2CNimNode%2CNimNode%2Cstring%2CLineInfo%2CNimNode"><span class="Identifier">traceDeque</span></a><span class="Other">(</span><span class="Identifier">hook</span><span class="Other">:</span> <a href="cps/spec.html#Hook"><span class="Identifier">Hook</span></a><span class="Other">;</span> <span class="Identifier">c</span><span class="Other">,</span> <span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">;</span> <span class="Identifier">fun</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">info</span><span class="Other">:</span> <span class="Identifier">LineInfo</span><span class="Other">;</span>
                <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">NimNode</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">NimNode</span> {.<span class="Identifier">used</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    This is the default tracing implementation which can be reused when implementing your own <tt class="docutils literal"><span class="pre"><span class="Identifier">trace</span></span></tt> macros.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L207" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L207" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="17">
  <h1><a class="toc-backref" href="#17">Macros</a></h1>
  <dl class="item">
    <div id="()-macros-all">
  <div id="().m,Callback[C,R,P],varargs[typed]">
  <dt><pre><span class="Keyword">macro</span> <a href="#%28%29.m%2CCallback%5BC%2CR%2CP%5D%2Cvarargs%5Btyped%5D"><span class="Identifier">`()`</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">;</span> <span class="Identifier">R</span><span class="Other">;</span> <span class="Identifier">P</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">callback</span><span class="Other">:</span> <a href="cps/spec.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">[</span><span class="Identifier">C</span><span class="Other">,</span> <span class="Identifier">R</span><span class="Other">,</span> <span class="Identifier">P</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">arguments</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">typed</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">R</span></pre></dt>
  <dd>
    
    Allows for natural use of call syntax to invoke a callback and recover its result in a single statement, inside a continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L321" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L321" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="cps-macros-all">
  <div id="cps.m,typed,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#cps.m%2Ctyped%2Cuntyped"><span class="Identifier">cps</span></a><span class="Other">(</span><span class="Identifier">tipe</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">;</span> <span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    When applied to a procedure, rewrites the procedure into a continuation form. When applied to a procedure type definition, rewrites the type into a callback form.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L79" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L79" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="stack-macros-all">
  <div id="stack.m,TraceFrame,T">
  <dt><pre><span class="Keyword">macro</span> <a href="#stack.m%2CTraceFrame%2CT"><span class="Identifier">stack</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">frame</span><span class="Other">:</span> <a href="cps/spec.html#TraceFrame"><span class="Identifier">TraceFrame</span></a><span class="Other">;</span> <span class="Identifier">target</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">used</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to alter the recording of &quot;stack&quot; frames. The return value evaluates to the continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L244" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L244" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="trace-macros-all">
  <div id="trace.m,static[Hook],typed,typed,string,LineInfo,typed">
  <dt><pre><span class="Keyword">macro</span> <a href="#trace.m%2Cstatic%5BHook%5D%2Ctyped%2Ctyped%2Cstring%2CLineInfo%2Ctyped"><span class="Identifier">trace</span></a><span class="Other">(</span><span class="Identifier">hook</span><span class="Other">:</span> <span class="Identifier">static</span><span class="Other">[</span><a href="cps/spec.html#Hook"><span class="Identifier">Hook</span></a><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">source</span><span class="Other">,</span> <span class="Identifier">target</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">;</span> <span class="Identifier">fun</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span>
            <span class="Identifier">info</span><span class="Other">:</span> <span class="Identifier">LineInfo</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span> {.<span class="Identifier">used</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to introduce control-flow tracing of each hook and entry to each continuation leg. The <tt class="docutils literal"><span class="pre"><span class="Identifier">fun</span></span></tt> argument holds a simple stringification of the <tt class="docutils literal"><span class="pre"><span class="Identifier">target</span></span></tt> that emitted the trace, while <tt class="docutils literal"><span class="pre"><span class="Identifier">target</span></span></tt> holds the symbol itself.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L257" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L257" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="whelp-macros-all">
  <div id="whelp.m,typed">
  <dt><pre><span class="Keyword">macro</span> <a href="#whelp.m%2Ctyped"><span class="Identifier">whelp</span></a><span class="Other">(</span><span class="Identifier">call</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    <p>Instantiate the given continuation call but do not begin running it; instead, return the continuation as a value.</p>
<p>If you pass <tt class="docutils literal"><span class="pre"><span class="Identifier">whelp</span></span></tt> a continuation procedure <em>symbol</em> instead, the result is a <tt class="docutils literal"><span class="pre"><span class="Identifier">Callback</span></span></tt> which you can use to create many individual continuations or recover the <tt class="docutils literal"><span class="pre"><span class="Identifier">result</span></span></tt> of an extant continuation.</p>

    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L136" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L136" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="whelp.m,Continuation,typed">
  <dt><pre><span class="Keyword">macro</span> <a href="#whelp.m%2CContinuation%2Ctyped"><span class="Identifier">whelp</span></a><span class="Other">(</span><span class="Identifier">parent</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">;</span> <span class="Identifier">call</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    As in <tt class="docutils literal"><span class="pre"><span class="Identifier">whelp</span><span class="Punctuation">(</span><span class="Identifier">call</span><span class="Punctuation">(</span><span class="Operator">...</span><span class="Punctuation">)</span><span class="Punctuation">)</span></span></tt>, but also links the new continuation to the supplied parent for the purposes of exception handling and similar.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L154" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L154" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="18">
  <h1><a class="toc-backref" href="#18">Templates</a></h1>
  <dl class="item">
    <div id="boot-templates-all">
  <div id="boot.t,T">
  <dt><pre><span class="Keyword">template</span> <a href="#boot.t%2CT"><span class="Identifier">boot</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">used</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to refine a continuation after it has been allocated but before it is first run. The return value specifies the continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L186" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L186" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="coop-templates-all">
  <div id="coop.t,T">
  <dt><pre><span class="Keyword">template</span> <a href="#coop.t%2CT"><span class="Identifier">coop</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">used</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol as a <tt class="docutils literal"><span class="pre"><span class="Operator">.</span><span class="Identifier">cpsMagic</span><span class="Operator">.</span></span></tt> to introduce a cooperative yield at appropriate continuation exit points. The return value specifies the continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L180" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L180" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="dismissed-templates-all">
  <div id="dismissed.t,Continuation">
  <dt><pre><span class="Keyword">template</span> <a href="#dismissed.t%2CContinuation"><span class="Identifier">dismissed</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> if the continuation was dimissed.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L50" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L50" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="finished-templates-all">
  <div id="finished.t,Continuation">
  <dt><pre><span class="Keyword">template</span> <a href="#finished.t%2CContinuation"><span class="Identifier">finished</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> if the continuation is finished.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L46" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L46" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="head-templates-all">
  <div id="head.t,T">
  <dt><pre><span class="Keyword">template</span> <a href="#head.t%2CT"><span class="Identifier">head</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">first</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span class="Identifier">used</span>.}</pre></dt>
  <dd>
    
    Reimplement this symbol to configure a continuation for use when there is no parent continuation available. The return value specifies the continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L162" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L162" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="recover-templates-all">
  <div id="recover.t,Continuation">
  <dt><pre><span class="Keyword">template</span> <a href="#recover.t%2CContinuation"><span class="Identifier">recover</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span> {.<span class="Identifier">used</span>.}</pre></dt>
  <dd>
    
    Returns the result, i.e. the return value, of a continuation.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L315" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L315" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="running-templates-all">
  <div id="running.t,Continuation">
  <dt><pre><span class="Keyword">template</span> <a href="#running.t%2CContinuation"><span class="Identifier">running</span></a><span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="cps/spec.html#Continuation"><span class="Identifier">Continuation</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
  <dd>
    
    <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> if the continuation is running.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L42" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L42" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="whelpIt-templates-all">
  <div id="whelpIt.t,typed,untyped">
  <dt><pre><span class="Keyword">template</span> <a href="#whelpIt.t%2Ctyped%2Cuntyped"><span class="Identifier">whelpIt</span></a><span class="Other">(</span><span class="Identifier">input</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    Instantiate the given continuation call and inject <tt class="docutils literal"><span class="pre"><span class="Identifier">it</span></span></tt> in the body.
    <a href="https://github.com/nim-works/cps/tree/480fc83960e5d9aabe9ad3646f8db127cd079712/cps.nim#L111" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/nim-works/cps/edit/master/cps.nim#L111" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2024-01-17 19:03:01 UTC</small>
      </div>
    </div>
  </div>
  
  <!-- Google fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</body>
</html>
